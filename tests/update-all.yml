---
# https://www.netways.de/blog/2018/05/04/rundum-updaten-mit-ansible/

- hosts: centos*:!special-centos
  remote_user: alice
  become: yes
  tasks:
    - name: update everything
      yum:
        name: "*"
        state: latest
        exclude: "owncloud*"

- hosts: special-centos
  remote_user: alice
  become: yes
  tasks:
    - name: update everything
      yum:
        name: "*"
        state: latest
        skip_broken: yes

- hosts: debian*:raspbian*
  remote_user : alice
  become: yes
  tasks:
    - name: install dmidecode
      apt:
        name: dmidecode
        update_cache: yes

    - name: update package cache
      apt:
        update_cache: yes

    - name: upgrade packages
      apt:
        upgrade: dist
        force: yes

    - name: autoremove dependencies
      apt:
        autoremove: yes